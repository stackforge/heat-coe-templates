#cloud-config
merge_how: dict(recurse_array)+list(append)
write_files:
  - path: /etc/etcd/etcd.conf
    owner: "root:root"
    permissions: "0644"
    content: |
      # [member]
      ETCD_NAME=default
      ETCD_DATA_DIR="/var/lib/etcd/default.etcd"
      #ETCD_SNAPSHOT_COUNTER="10000"
      #ETCD_HEARTBEAT_INTERVAL="100"
      #ETCD_ELECTION_TIMEOUT="1000"
      #ETCD_LISTEN_PEER_URLS="http://localhost:2380,http://localhost:7001"
      ETCD_LISTEN_CLIENT_URLS="http://0.0.0.0:4001"
      #ETCD_MAX_SNAPSHOTS="5"
      #ETCD_MAX_WALS="5"
      #ETCD_CORS=""
      #
      #[cluster]
      #ETCD_INITIAL_ADVERTISE_PEER_URLS="http://localhost:2380,http://localhost:7001"
      # if you use different ETCD_NAME (e.g. test), set ETCD_INITIAL_CLUSTER value for this name, i.e. "test=http://..."
      #ETCD_INITIAL_CLUSTER="default=http://localhost:2380,default=http://localhost:7001"
      #ETCD_INITIAL_CLUSTER_STATE="new"
      #ETCD_INITIAL_CLUSTER_TOKEN="etcd-cluster"
      #ETCD_ADVERTISE_CLIENT_URLS="http://localhost:2379,http://localhost:4001"
      #ETCD_DISCOVERY=""
      #ETCD_DISCOVERY_SRV=""
      #ETCD_DISCOVERY_FALLBACK="proxy"
      #ETCD_DISCOVERY_PROXY=""
      #
      #[proxy]
      #ETCD_PROXY="off"
      #
      #[security]
      #ETCD_CA_FILE=""
      #ETCD_CERT_FILE=""
      #ETCD_KEY_FILE=""
      #ETCD_PEER_CA_FILE=""
      #ETCD_PEER_CERT_FILE=""
      #ETCD_PEER_KEY_FILE=""
